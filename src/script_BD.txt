
DROP TABLE IF EXISTS REQUISICAO;
DROP TABLE IF EXISTS COORDENACAO;
DROP TABLE IF EXISTS REQUERENTE;
DROP TABLE IF EXISTS USUARIO_GRUPO;
DROP TABLE IF EXISTS USUARIO;
DROP TABLE IF EXISTS GRUPO;
DROP TABLE IF EXISTS AMBIENTE;
DROP TABLE IF EXISTS PLATAFORMA;

CREATE TABLE USUARIO
	(id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
	 nome varchar(200) NOT NULL,
	 em_uso char(1) NOT NULL,
	 ativo char(1) NOT NULL,
	 bloqueado char(1) NOT NULL,
	 expirado char(1) NOT NULL,
	 deletado char(1) NOT NULL,
	 senha varchar(30) NOT NULL,	 
	 email varchar(50));

CREATE TABLE PLATAFORMA
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     nome varchar(50) NOT NULL);

CREATE TABLE AMBIENTE
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     nome varchar(50) NOT NULL,
     idPlataforma INTEGER UNSIGNED,
     FOREIGN KEY(idPlataforma) REFERENCES PLATAFORMA(id));

CREATE TABLE GRUPO
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     nome varchar(50) NOT NULL,
     idAmbiente INTEGER UNSIGNED,
     FOREIGN KEY(idAmbiente) REFERENCES AMBIENTE(id));

CREATE TABLE USUARIO_GRUPO
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     idUsuario INTEGER UNSIGNED,
     idGrupo INTEGER UNSIGNED,
     FOREIGN KEY(idUsuario) REFERENCES USUARIO(id),
     FOREIGN KEY(idGrupo) REFERENCES GRUPO(id));

CREATE TABLE REQUERENTE
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     matricula varchar(30) NOT NULL,
     nome varchar(200) NOT NULL,
     funcao varchar(30) NOT NULL);

CREATE TABLE COORDENACAO
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     NOME varchar(50) NOT NULL,
     idRequerente INTEGER UNSIGNED,
     FOREIGN KEY(idRequerente) REFERENCES REQUERENTE(id));

CREATE TABLE REQUISICAO
    (id INTEGER UNSIGNED PRIMARY KEY AUTO_INCREMENT,
     data DATE NOT NULL,
     foi_executada char(1) NOT NULL,
     evento varchar(20) NOT NULL,
     idUsuario INTEGER UNSIGNED,
     idCoordenacao INTEGER UNSIGNED,
     FOREIGN KEY(idUsuario) REFERENCES USUARIO(id),
     FOREIGN KEY(IdCoordenacao) REFERENCES COORDENACAO(id));
  
     
     
     
